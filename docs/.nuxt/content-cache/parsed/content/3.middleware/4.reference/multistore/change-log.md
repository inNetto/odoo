{"parsed":{"_path":"/middleware/reference/multistore/change-log","_dir":"multistore","_draft":false,"_partial":false,"_locale":"","title":"Change log","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"change-log"},"children":[{"type":"text","value":"Change log"}]},{"type":"element","tag":"h2","props":{"id":"_410"},"children":[{"type":"text","value":"4.1.0"}]},{"type":"element","tag":"h3","props":{"id":"minor-changes"},"children":[{"type":"text","value":"Minor Changes"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ADDED"}]}]},{"type":"text","value":" Support for asynchronous "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fetchConfiguration()"}]},{"type":"text","value":" and cacheManagerFactory's "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"get()"}]},{"type":"text","value":" / "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set()"}]},{"type":"text","value":" methods."}]}]},{"type":"element","tag":"pre","props":{"className":"language-diff shiki shiki-themes one-dark-pro","code":"import { createMultistoreExtension } from \"@vue-storefront/multistore\";\n\nexport const multistoreExtension = createMultistoreExtension({\n- fetchConfiguration: () => ({\n+ fetchConfiguration: async () => ({ ... }),\n  mergeConfigurations: () => ({ ... }),\n  cacheManagerFactory: () => ({\n-   get(key) { ... },\n+   async get(key) { ... },\n-   set(key, value) { ... },\n+   async set(key, value) { ... },\n  }),\n});\n\n","language":"diff","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"import { createMultistoreExtension } from \"@vue-storefront/multistore\";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"export const multistoreExtension = createMultistoreExtension({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"- fetchConfiguration: () => ({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"+ fetchConfiguration: async () => ({ ... }),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"  mergeConfigurations: () => ({ ... }),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"  cacheManagerFactory: () => ({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"-   get(key) { ... },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"+   async get(key) { ... },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"-   set(key, value) { ... },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"+   async set(key, value) { ... },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"  }),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"});\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_400"},"children":[{"type":"text","value":"4.0.0"}]},{"type":"element","tag":"h3","props":{"id":"major-changes"},"children":[{"type":"text","value":"Major Changes"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"CHANGED"}]}]},{"type":"text","value":" Changed minimum Node version from 16 to 18. The condition that was forcing the Node version to be lower than 19 is also removed."}]}]},{"type":"element","tag":"h3","props":{"id":"patch-changes"},"children":[{"type":"text","value":"Patch Changes"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Updated dependencies:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"@vue-storefront/middleware@4.0.0"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_300"},"children":[{"type":"text","value":"3.0.0"}]},{"type":"element","tag":"h3","props":{"id":"patch-changes-1"},"children":[{"type":"text","value":"Patch Changes"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Updated dependencies:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"@vue-storefront/middleware@3.9.0"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-diff shiki shiki-themes one-dark-pro","code":"dependencies: {\n-  \"@vue-storefront/middleware\": \"3.x.x\",\n-  \"@vue-storefront/multistore\": \"2.x.x\",\n+  \"@vue-storefront/middleware\": \"^3.9.0\",\n+  \"@vue-storefront/multistore\": \"^3.0.0\",\n}\n","filename":"package.json","language":"diff","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"dependencies: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"-  \"@vue-storefront/middleware\": \"3.x.x\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"-  \"@vue-storefront/multistore\": \"2.x.x\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"+  \"@vue-storefront/middleware\": \"^3.9.0\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"+  \"@vue-storefront/multistore\": \"^3.0.0\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_201"},"children":[{"type":"text","value":"2.0.1"}]},{"type":"element","tag":"h3","props":{"id":"patch-changes-2"},"children":[{"type":"text","value":"Patch Changes"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"d95379e91: "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FIXED"}]},{"type":"text","value":" Type issue in multistore package. Cache control "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" method returns "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"any"}]},{"type":"text","value":" type and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"get"}]},{"type":"text","value":" returns "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"StoreConfig | undefined"}]},{"type":"text","value":". Also, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"MiddlewareConfiguration"}]},{"type":"text","value":" type has been removed as it is no longer necessary."}]}]},{"type":"element","tag":"h2","props":{"id":"_200"},"children":[{"type":"text","value":"2.0.0"}]},{"type":"element","tag":"h3","props":{"id":"major-changes-1"},"children":[{"type":"text","value":"Major Changes"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"8ea533e05: "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"CHANGED"}]},{"type":"text","value":" We standardized the way of creating and configuring multistore extension.\nPreviously, the extension was created by importing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"multistoreExtension"}]},{"type":"text","value":" from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@vue-storefront/multistore"}]},{"type":"text","value":" and passing it to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"extensions"}]},{"type":"text","value":" function.\nConfiguration was passed to the extension by adding "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"multistore"}]},{"type":"text","value":" property to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"configuration"}]},{"type":"text","value":" object.\nNow, the extension is created by calling "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"createMultistoreExtension"}]},{"type":"text","value":" from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@vue-storefront/multistore"}]},{"type":"text","value":" and passing the multistore configuration to it."},{"type":"element","tag":"pre","props":{"className":"language-diff shiki shiki-themes one-dark-pro","code":"- import { multistoreExtension } from \"@vue-storefront/multistore\";\n+ import { createMultistoreExtension } from \"@vue-storefront/multistore\";\nimport { multistoreConfig } from \"./multistore.config\";\n\nexport default {\n  integrations: {\n    sapcc: {\n      location: \"@vue-storefront/sapcc-api/server\",\n      configuration: {\n        // ...\n-        multistore: multistoreConfig,\n      },\n      extensions: (predefinedExtensions) => [\n        ...predefinedExtensions,\n-        multistoreExtension,\n+        createMultistoreExtension(multistoreConfig),\n      ],\n    },\n  },\n};\n","filename":"middleware.config.ts","language":"diff","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"- import { multistoreExtension } from \"@vue-storefront/multistore\";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"+ import { createMultistoreExtension } from \"@vue-storefront/multistore\";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"import { multistoreConfig } from \"./multistore.config\";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"export default {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"  integrations: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"    sapcc: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"      location: \"@vue-storefront/sapcc-api/server\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"      configuration: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"        // ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"-        multistore: multistoreConfig,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"      extensions: (predefinedExtensions) => [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"        ...predefinedExtensions,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"-        multistoreExtension,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"+        createMultistoreExtension(multistoreConfig),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"};\n"}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"8ea533e05: "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FIXED"}]},{"type":"text","value":" singleton cache issue, previously the cache was a singleton which could lead to unexpected behaviour when extension was used in different integrations in parallel. Now, the cache is being created during extension creation, what ensures proper cache behaviour."}]}]},{"type":"element","tag":"h2","props":{"id":"_102"},"children":[{"type":"text","value":"1.0.2"}]},{"type":"element","tag":"h3","props":{"id":"patch-changes-3"},"children":[{"type":"text","value":"Patch Changes"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3410b778a: "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FIXED"}]},{"type":"text","value":" Unified Multistore not exposing types at its entrypoint; previously, type definitions were inaccessible, leading to integration issues. Now, types are correctly exposed, enhancing TypeScript integration and accessibility."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":5,"depth":2,"links":[{"id":"_410","depth":2,"text":"4.1.0","children":[{"id":"minor-changes","depth":3,"text":"Minor Changes"}]},{"id":"_400","depth":2,"text":"4.0.0","children":[{"id":"major-changes","depth":3,"text":"Major Changes"},{"id":"patch-changes","depth":3,"text":"Patch Changes"}]},{"id":"_300","depth":2,"text":"3.0.0","children":[{"id":"patch-changes-1","depth":3,"text":"Patch Changes"}]},{"id":"_201","depth":2,"text":"2.0.1","children":[{"id":"patch-changes-2","depth":3,"text":"Patch Changes"}]},{"id":"_200","depth":2,"text":"2.0.0","children":[{"id":"major-changes-1","depth":3,"text":"Major Changes"}]},{"id":"_102","depth":2,"text":"1.0.2","children":[{"id":"patch-changes-3","depth":3,"text":"Patch Changes"}]}]}},"_type":"markdown","_id":"content:3.middleware:4.reference:multistore:change-log.md","_source":"content","_file":"3.middleware/4.reference/multistore/change-log.md","_extension":"md","sitemap":{"loc":"/middleware/reference/multistore/change-log"},"layout":"default"},"hash":"RqA76oBZsl"}